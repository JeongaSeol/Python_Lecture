# Python CH.08 String & Text File Processing

> 데이터가 포함된 텍스트 파일에서 문자열을 읽어올 수 있음
>
> 사용 목적에 맞게 문자열을 처리할 수 있음
>
> Python에 내장된 문자열 메서드를 통해서 문자열 처리가 용이함
>
> 문자열을 처리하는 방법과 텍스트 파일의 내용을 읽어서 처리할 수 있음



## 8.1 문자열 다루기

>  text file의 내용을 문자열로 가져오고, 문자열 처리를 통해 원하는 형태의 data로 변환해서 이용
>
> __문자열 분리, 불필요한 문자열 제거, 문자열 연결__ 등의 처리가 필요

- #### 문자열 분리하기

  - `str.split(sep)` : 문자열을 부분 문자열로 나눌 때 사용하는 메서드
    - 문자열(`str`)에서 구분자(separator)인 `sep`을 기준으로 문자열을 분리해서 __list__로 return
    - 인자 없이 `split()`을 사용하면 문자열 사이의 모든 공백과 개행문자(\n)을 없애고 분리된 문자열을 list형식으로 return

  ```python
  # 콤마(,) 기준으로 단어를 분리
  ---------------------------<코드>---------------------------------
  
  coffee_menu_str = "에스프레소, 아메리카노, 카페라떼, 카푸치노"
  
  coffee_menu_str.split(',')									#  콤마(,)로 문자열 분리
  
  ---------------------------<결과>---------------------------------
  ['에스프레소', ' 아메리카노', ' 카페라떼', ' 카푸치노']	# 분리된 문자열은 list 형식으로 저장됨
  ```

  ```python
  # 공백( ) 기준으로 단어를 분리
  ---------------------------<코드>---------------------------------
  
  coffee_menu_str = "에스프레소 아메리카노 카페라떼 카푸치노"
  coffee_menu_str.split(' ')									#  공백( )로 문자열 분리
  
  ---------------------------<결과>---------------------------------
  ['에스프레소', ' 아메리카노', ' 카페라떼', ' 카푸치노']	# 공백도 포함해서 문자열이 분리됨
  ```

  ```python
  # 문자열을 변수에 할당하지 않고 문자열에 직접 split()메서드 사용 가능
  ---------------------------<코드>---------------------------------
  
  "에스프레소 아메리카노 카페라떼 카푸치노".split(' ')		# 변수 선언 없이 문자열을 직접 사용
  
  ---------------------------<결과>---------------------------------
  ['에스프레소', ' 아메리카노', ' 카페라떼', ' 카푸치노']	
  ```

  ```python
  # 모든 공백과 개행문자(\n)을 제거하고 문자열 분리
  ---------------------------<코드>---------------------------------
  
  "   에스프레소  \n\n  아메리카노 \n 카페라떼   카푸치노 \n\n".split()						
  	 # 문자열 사이의 공백과 개행문자를 제거하고 공백으로 문자열을 구분하여 분리
  
  ---------------------------<결과>---------------------------------
  ['에스프레소', '아메리카노', '카페라떼', '카푸치노']	# 공백 없이 문자열이 분리됨
  ```

  - `str.split(sep, maxsplit=숫자)` : 앞에서 원하는 횟수만큼만 문자열을 분리
    - 문자열`str`을 구분자`sep`을 기준으로 `maxsplit`만큼 분리해서 list로 return
    - 구분자`sep`은 생략 가능(생략하면 공백 제거하고 문자열 분리)

  ```python
  # 앞에서부터 2개의 공백(sep)까지만 문자열을 나눠서 결과적으로 3개의 항목이 담긴 list return
  ---------------------------<코드>---------------------------------
  
  "에스프레소 아메리카노 카페라떼 카푸치노 바닐라라떼".split(maxsplit=2)						
  
  ---------------------------<결과>---------------------------------
  ['에스프레소', '아메리카노', '카페라떼 카푸치노 바닐라라떼']
  	# 2개의 공백까지만 문자열을 분리하고 그 다음은 한꺼번에 하나의 문자열로 분리하지 않고 return
  ```

  ```python
  # 국가번호까지 있는 전화번호에서 국가번호를 뺀 나머지 번호를 구하기
  ---------------------------<코드>---------------------------------
  
  phone_number = '+82-01-2345-6789'
  split_num = phone_number.split("-",2)
  print(split_num)
  print("국내전화번호 : 010-{0}".format(split_num[2]))
  
  ---------------------------<결과>---------------------------------
  ['+82', '01', '2345-6789']
  국내전화번호 : 010-2345-6789
  ```

  

- #### 문자열 삭제하기

  - `str.strip(chars)` : 문자열에서 지정 문자를 제거
    - 문자열`str` 앞과 뒤에서 시작해서 지정한 문자`chars`외의 다른 문자를 만날 때까지 지정한 문자`chars`를 모두 삭제한 문자열을 return
    - 지정한 문자`chars`와 일치하는 것이 없으면 문자열`str`을 그대로 return
    - 제거하고자 하는 문자가 두 개 이상이면 `strip()`을 반복해서 사용하거나 `chars`자리에 한번에 사용
    - 지정한 문자`chars`가 두 개 이상일 경우 순서 상관없이 해당 문자를 삭제
    - `chars` 없이 `str.strip()`를 수행하면 문자열 앞과 뒤의 모든 공백과 개행문자`\n`삭제
    - `str`앞뒤에서 지정한 문자`chars`외 다른 문자를 만날 때까지만 `chars`를 모두 삭제

  ```python
  ## 문자열 앞과 뒤의 모든 공백 / 개행문자('\n') 지우기
  ---------------------------<코드>---------------------------------
  
  str = "   Python   "
  str.strip()
  str2 = " \n Python \n\n  \n"
  str2.strip()
  
  ---------------------------<결과>---------------------------------
  'Python'
  'Python'
  ```

  ```python
  ## 문자열에서 모든 'a' 제거하기
  ---------------------------<코드>---------------------------------
  
  str3 = "aaaaPythonaaaaa"
  str3.strip('a')
  
  ---------------------------<결과>---------------------------------
  'Python'
  ```

  ```python
  ## 문자열에서 두 개 이상의 문자 제거하기
  ---------------------------<코드>---------------------------------
  
  str4 = "aaabbaPythonbbaaaaa"
  str4.strip('ab')					# 문자열 앞 뒤에 있는 'a', 'b'를 모두 삭제
  
  ---------------------------<결과>---------------------------------
  'Python'
  ```

  ```python
  ## 문자열에서 두 개 이상의 문자 제거하기
  ---------------------------<코드>---------------------------------
  
  str5 = "!!##*!*#*!*#.... Python.. . !..%%!#*!#*..! "
  str5.strip('*.!# %')		# 문자열 앞 뒤에 있는 '*','.','!','#',' ','%'를 모두 삭제
  
  ---------------------------<결과>---------------------------------
  'Python'
  ```

  ```python
  ## 문자열 앞/뒤에서 지정한문자(chars) 외 다른 문자를 만날 때까지만 chars를 삭제하므로 
  ## 'aaaBallaaa'에서 Ball의 'a'는 지워지지 않음
  ---------------------------<코드>---------------------------------
  
  "aaaBallaaa".strip('a')
  
  ---------------------------<결과>---------------------------------
  'Ball'
  ```

  ```python
  ## 문자열 앞/뒤에 있는 공백/개행(\n)외 다른 문자를 만날 때까지만 삭제하므로 
  ## 문자열 사이사이에 있는 공백과 개행문자(\n)는 삭제되지 않음
  ---------------------------<코드>---------------------------------
  
  "\n This is very \n fast. \n\n".strip()
  
  ---------------------------<결과>---------------------------------
  'This is very \n fast.'
  ```

  - `str.lstrip()` / `str.rstrip()` : 문자열의 왼쪽(앞)/오른쪽(뒤) 부분만 삭제하는 메서드

  ```python
  ## 문자열 앞부분(왼쪽)만 해당 문자를 삭제
  ---------------------------<코드>---------------------------------
  
  str_lr = "000Python is easy to learn.000"
  print(str_lr.strip('0'))		# 문자열의 앞과 뒤 모두 해당 문자를 삭제
  print(str_lr.lstrip('0'))		# 문자열의 앞(왼쪽)만 해당 문자를 삭제
  
  ---------------------------<결과>---------------------------------
  Python is easy to learn.
  Python is easy to learn.000
  ```

  ````python
  ## 문자열 뒷부분(오른쪽)만 해당 문자를 삭제
  ---------------------------<코드>---------------------------------
  
  str_lr = "000Python is easy to learn.000"
  print(str_lr.strip('0'))		# 문자열의 앞과 뒤 모두 해당 문자를 삭제
  print(str_lr.rstrip('0'))		# 문자열의 뒤(오른쪽)만 해당 문자를 삭제
  
  ---------------------------<결과>---------------------------------
  Python is easy to learn.
  000Python is easy to learn.
  ````

  ```python
  ##(응용) 콤마와 공백을 포함한 문자열에서 콤마를 기준으로 문자열을 분리하고, 
  ## 		각각 분리된 문자열에서 공백을 모두 제거 -> 반복문 이용
  ---------------------------<코드>---------------------------------
  
  coffee_menu = "  에스프레소,  아메리카노,    카페라떼, 카푸치노"
  coffee_menu_list = coffee_menu.split(',')	# 먼저 콤마를 기준으로 문자열을 분리
  coffee_list = []
  for coffee in coffee_menu_list :
  	coffee_list.append(coffee.strip())	# 공백을 제거한 후, 최종적으로 coffee_list에 추가
  print(coffee_list)
  
  ---------------------------<결과>---------------------------------
  ['에스프레소', '아메리카노', '카페라떼', '카푸치노']
  ```

  

- #### 문자열 연결하기

  - `str.join(seq)` : 나열형 데이터의 모든 항목을 하나의 문자열로 만드는 메서드
    - 문자열을 항목으로 갖는 시퀀스`seq`의 항목 사이에 구분자 문자열(공백)을 넣은 후 문자열 return
    - `seq`는 list, tuple 등 여러 데이터를 순서대로 담고 있는 나열형 데이터

  ```python
  ## 문자열 리스트를 문자열로 return
  ---------------------------<코드>---------------------------------
  
  address_list = ["서울시", '서초구', '반포대로', '201(반포동)']
  a = ' '			# 구분자 문자열(한칸 공백)
  a.join(address_list) # 구분자 문자열로 address_list 항목을 구분하고, 하나의 문자열로 return
  
  ---------------------------<결과>---------------------------------
  서울시 서초구 반포대로 201(반포동)
  ```

  ```python
  ## 구분자 문자열을 변수에 할당하지 않고 직접 지정 가능
  ---------------------------<코드>---------------------------------
  
  address_list = ["서울시", '서초구', '반포대로', '201(반포동)']
  " ".join(address_list) 
  
  ---------------------------<결과>---------------------------------
  서울시 서초구 반포대로 201(반포동)
  ```



- #### 문자열 검색

  - `str.find(search_str)` : 문자열`str`에서 찾으려는 문자열`search_str`과 첫 번째로 일치하는 문자열												`str`의 위치를 return
    - 문자열의 위치는 0부터 시작
    - 찾으려는 문자열`search_str`이 없으면 __-1__ return
    - __대소문자 구분__하므로 주의

  ```python
  ## 문자열에서 특정 문자열의 위치를 찾음
  ---------------------------<코드>---------------------------------
  
  str_f = "Python code."
  
  print("'Python' 문자열의 위치 : ", str_f.find("Python"))
  print("'code' 문자열의 위치 : ", str_f.find("code"))
  print("'n' 문자의 위치 : ", str_f.find("n"))
  print("'easy' 문자열의 위치 : ", str_f.find("easy"))
  
  ---------------------------<결과>---------------------------------
  'Python' 문자열의 위치 :  0
  'code' 문자열의 위치 :  7
  'n' 문자의 위치 :  5
  'easy' 문자열의 위치 :  -1
  ```

  - `str.find(search_str, start, end)` : start ~ end-1 범위에서 찾고자 하는 문자열`search_str`을    																		검색해서 일치하는 문자열의 위치를 return
    - 지정된 범위에서만 문자열을 검색
    - 찾지 못하면 __-1__ return
    - `str.find(search_str, start)` :시작 위치만 지정해서 검색 범위(start ~ 문자열 끝)를 설정 가능

  ```python
  ## 시작 위치와 끝 위치를 지정해서 지정 범위에서만 문자열 찾기
  ---------------------------<코드>---------------------------------
  
  str_f_se = "Python is powerful. Python is easy to learn."
  
  print(str_f_se.find("Python", 10, 30)) 	# 시작위치와 끝 위치를 지정
  print(str_f_se.find("Python", 35)) # 시작위치만 지정
  
  ---------------------------<결과>---------------------------------
  20
  -1
  ```

  - `str.count(search_str)` : 문자열`str`에서 검색문자열`serach_str`이 나오는 횟수를 return
    - `str.count(search_str, start)` : 검색 시작 범위만 지정
    - `str.count(serarch_str, start, end)` : 검색의 시작과 끝의 범위를 지정
    - 찾고자 하는 문자열`search_str`과 일치하는 문자열이 없다면 __0__을 return

  ```python
  ## 검색 문자열 횟수 구하기
  ---------------------------<코드>---------------------------------
  
  str_c = "Python is powerful. Python is easy to learn. Python is open."
  
  print("Python의 개수는? ", str_c.count("Python"))
  print("powerful의 개수는? ", str_c.count("powerful"))
  print("IPython의 개수는? ", str_c.count("IPython"))
  
  ---------------------------<결과>---------------------------------
  Python의 개수는?  3
  powerful의 개수는?  1
  IPython의 개수는?  0
  ```

  - `str.startswith(prefix)` : 문자열`str`이 지정된 문자열`prefix`로 시작되면 True, 아니면 False 반환
  - `str.endswith(suffix)` : 문자열`str`이 지정된 문자열`suffix`로 끝나면 True, 아니면 False 반환
    - `startswith()`와 `endswith()`는 `find()`와 마찬가지로 `start`, `end`범위를 지정할 수 있음

  ```python
  ## 해당 문자열로 시작하는지/끝나는지 검색
  ---------------------------<코드>---------------------------------
  
  str_se = "Python is powerful. Python is easy to learn."
  
  print("Python으로 시작합니까?", str_se.startswith("Python"))
  print("is로 시작합니까?", str_se.startswith("is"))
  print(".으로 끝납니까?", str_se.endswith("."))
  print("learn으로 끝납니까?", str_se.endswith("learn"))
  
  ---------------------------<결과>---------------------------------
  Python으로 시작합니까? True
  is로 시작합니까? False
  .으로 끝납니까? True
  learn으로 끝납니까? False
  ```



- #### 문자열 바꾸기

  - `str.replace(old, new[, count])` : 문자열`str`에서 지정한 문자열`old`를 새로운 문자열`new`로 바꿈
    - `count`는 지정된 문자열을 바꾸는 횟수. 지정하지 않으면 문자열`str` 전체에서 찾아서 바꿈
    - `new`를 빈 문자열`''`로 지정하면 특정 문자열을 삭제하는 것과 같음
    - `old`를 __두 개 이상 사용할 수 없음__. 여러번 바꾸는 과정이 필요하다면 메서드를 반복해서 사용

  ```python
  ## 문자열에서 지정한 문자열을 찾아 새로운 문자열로 바꿈
  ---------------------------<코드>---------------------------------
  
  str_a = "Python is fast. Python is friendly. Python is open."
  
  print(str_a.replace('Python', 'IPython'))			# 모두 바꿈
  print(str_a.replace('Python', 'IPython', 2))		# 정해진 횟수(2)만큼 바꿈
  
  ---------------------------<결과>---------------------------------
  IPython is fast. IPython is friendly. IPython is open.
  IPython is fast. IPython is friendly. Python is open.	# 세 번째 Python은 바뀌지 않음
  ```

  ```python
  ## 문자열에서 특정 문자'[ ]'를 찾아서 삭제하기
  ---------------------------<코드>---------------------------------
  
  str_b = '[Python] [is] [fast]'
  str_b1 = str_b.replace('[', '')	 	# 문자열에서 '['을 찾아서 빈 문자열로 바꿈(== '[' 삭제)
  str_b2 = str_b1.replace(']', '')	# 문자열에서 ']'을 찾아서 빈 문자열로 바꿈(== ']' 삭제)
  
  print(str_b)
  print(str_b1)
  print(str_b2)
  
  ---------------------------<결과>---------------------------------
  [Python] [is] [fast]
  Python] is] fast]
  Python is fast
  ```



- #### 문자열 구성 확인하기

  > 문자열이 숫자로만 이루어졌는지,
  >
  > 문자로만 이루어졌는지, 숫자와 문자가 모두 포함되어 있는지,
  >
  > 알파벳 대문자로만 이루어졌는지, 소문자로만 이루어졌는지 등 __문자열의 구성__을 알고자 할 때 사용

  | 메서드    | 설명                                                         | 사용예        |
  | --------- | ------------------------------------------------------------ | ------------- |
  | isalpha() | 문자열이 숫자, 특수문자, 공백이 아닌 __문자로 구성__되어 있으면 True,         아니면 False 반환( return ) | str.isalpha() |
  | isdigit() | 문자열이 모두 숫자로 구성되어 있으면 True, 아니면 False return | str.isdigit() |
  | isalnum() | 문자열이 특수문자나 공백이 아닌 문자와 숫자로 구성되어 있으면 True,      아니면 False return | str.isalnum() |
  | isspace() | 문자열이 모두 공백 문자로 구성되어 있으면 True, 아니면 False | str.isspace() |
  | isupper() | 문자열이 모두 대문자로만 구성되어 있으면 True, 아니면 False  | str.isupper() |
  | islower() | 문자열이 모두 소문자로만 구성되어 있으면 True, 아니면 False  | str.islower() |

  ```python
  ## 문자열이 숫자, 특수문자, 공백 없이 문자로만 구성되어 있는지 검사
  ---------------------------<코드>---------------------------------
  
  print('Python'.isalpha())			# 문자로만 구성
  print('Ver. 3.x'.isalpha())			# 공백, 특수문자, 문자, 숫자로 구성
  
  ---------------------------<결과>---------------------------------
  True
  False
  ```

  ```python
  ## 문자열이 숫자로만 구성되어 있는지 검사
  ---------------------------<코드>---------------------------------
  
  print('12345'.isdigit())			# 숫자로만 구성
  print('12345abc'.isdigit())			# 숫자, 문자로 구성
  
  ---------------------------<결과>---------------------------------
  True
  False
  ```

  ```python
  ## 문자열이 특수문자, 공백 없이 문자와 숫자로만 구성되어 있는지 검사
  ---------------------------<코드>---------------------------------
  
  print('   abc123'.isalnum())		# 공백이 있음
  print('12345abc'.isalnum())			# 문자와 숫자로만 구성
  
  ---------------------------<결과>---------------------------------
  False
  True
  ```

  ```python
  ## 문자열이 공백문자로만 구성되어 있는지 검사
  ---------------------------<코드>---------------------------------
  
  print('     '.isspace())		# 공백으로만 구성
  print('  1  '.isspace())		# 공백과 숫자로 구성
  
  ---------------------------<결과>---------------------------------
  True
  False
  ```

  ```python
  ## 문자열이 모두 알파벳 대문자로만 구성되어 있는지 / 소문자로만 구성되어 있는지 검사
  ---------------------------<코드>---------------------------------
  
  print('PYTHON'.isupper())		# 대문자로만 구성
  print('Python'.isupper())		# 대문자와 소문자로 구성
  print('python'.islower())		# 소문자로만 구성
  print('Python'.islower())
  
  ---------------------------<결과>---------------------------------
  True
  False
  True
  False
  ```

  

- #### 대소문자 변경하기

  - `str.lower()` : 문자열에서 알파벳을 모두 __소문자로 변경__하는 메서드

  - `str.upper()` : 문자열에서 알파벳을 모두 __대문자로 변경__하는 메서드

    - python에서는 대소문자를 구분하므로 같은 의미의 문자열을 비교하더라도 

      대소문자가 다르면 다른 문자열로 인식.

    - 문자열 비교시, 모두 대문자나 소문자로 바꾼 후에 비교

  ```python
  ## 주어진 문자열str에서 알파벳의 모든 문자를 소문자로 바꾸기 / 대문자로 바꾸기
  ---------------------------<코드>---------------------------------
  
  string1 = 'Python is powerful. PYTHON IS EASY TO LEARN.'
  
  print(string1.lower())		# 소문자로 바꾸기
  print(string1.upper())		# 대문자로 바꾸기
  
  ---------------------------<결과>---------------------------------
  python is powerful. python is easy to learn.
  PYTHON IS POWERFUL. PYTHON IS EASY TO LEARN.
  ```

  ```python
  ## 주어진 문자열을 모두 대문자 / 소문자로 바꾼 후, 같은 문자열인지 비교
  ---------------------------<코드>---------------------------------
  
  print('Python'=='python')					# 대소문자가 다르면 다른 문자열로 인식
  print('Python'.lower()=='python'.lower())	# 문자열을 모두 소문자로 바꾼 후 비교
  print('Python'.upper()=='python'.upper())	# 문자열을 모두 대문자로 바꾼 후 비교
  
  ---------------------------<결과>---------------------------------
  False
  True
  True
  ```



## 텍스트 파일 다루기

> 파일의 내용을 한줄씩 읽어서 처리
>
> 파일에서 읽은 내용은 문자열 data이므로 이 data를 원하는 형태로 분리하고
>
> 연산이 필요한 부분은 숫자 데이터로 변환한 후 처리 

- #### 데이터 파일 준비 및 읽기

  - 텍스트 파일의 데이터를 읽고 처리하기 위해서는 먼저, __처리할 데이터와 수행할 작업 확인__
  - 교재에 있는 데이터 : 어느 커피 전문점에서 나흘 동안 기록한 메뉴별 커피 판매량
  - 하고자 하는 작업 : 4일 동안 메뉴당 전체 판매량과 하루 평균 판매량 구하기
  - 텍스트파일 : 'coffeeShopSales.txt'

  ```python
  ## 텍스트 파일 내용 확인
  ---------------------------<코드>---------------------------------
  
  !cat coffeeShopSales.txt
  
  ---------------------------<결과>---------------------------------
  날짜    에스프레소  아메리카노  카페라테  카푸치노			# 각 항목의 이름
  10.15       10  	50         45       20   		 # 각 항목의 data
  10.16       12		45         41       18
  10.17       11		53         32       25
  10.18       15		49         38       22
  ```

  ```python
  ## txt 파일 열고 한줄씩 읽어서 line에 할당 하고 출력  ==> 파일 내용 확인
  ---------------------------<코드>---------------------------------
  
  f = open('coffeeShopSales.txt')
  for line in f :
  	print(line, end='')
  f.close()
  
  ---------------------------<결과>---------------------------------
  날짜    에스프레소  아메리카노  카페라테  카푸치노
  10.15       10  	50         45       20   
  10.16       12		45         41       18
  10.17       11		53         32       25
  10.18       15		49         38       22
  ```

  

